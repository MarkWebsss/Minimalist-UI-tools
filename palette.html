<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Color Palette</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500&family=Syne:wght@600;800&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #0d0d0d;
    --surface: #161616;
    --surface2: #1e1e1e;
    --border: rgba(255,255,255,0.07);
    --text: #f0f0f0;
    --sub: #555;
    --sub2: #333;
    --accent: #fff;
    --shadow: 0 4px 24px rgba(0,0,0,0.4);
  }

  body {
    background: var(--bg);
    font-family: 'JetBrains Mono', monospace;
    color: var(--text);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  /* Header */
  header {
    padding: 24px 32px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 16px;
  }

  .header-left { display: flex; align-items: center; gap: 20px; }

  .logo {
    font-family: 'Syne', sans-serif;
    font-size: 18px;
    font-weight: 800;
    color: var(--text);
    text-decoration: none;
    letter-spacing: -0.02em;
  }

  .logo span { color: #888; }

  h1 {
    font-family: 'Syne', sans-serif;
    font-size: 15px;
    font-weight: 600;
    color: var(--sub);
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }

  /* Controls */
  .controls {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    align-items: center;
  }

  .ctrl-group {
    display: flex;
    gap: 4px;
    background: var(--surface);
    border-radius: 8px;
    padding: 4px;
    border: 1px solid var(--border);
  }

  .ctrl-btn {
    background: none;
    border: none;
    color: var(--sub);
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    padding: 7px 14px;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.15s;
    white-space: nowrap;
  }

  .ctrl-btn:hover { color: var(--text); background: var(--surface2); }
  .ctrl-btn.active { background: var(--text); color: var(--bg); }

  .color-pick-wrap {
    position: relative;
    display: flex;
    align-items: center;
    gap: 10px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 6px 14px 6px 10px;
    cursor: pointer;
  }

  .color-preview {
    width: 20px; height: 20px;
    border-radius: 4px;
    border: 1px solid rgba(255,255,255,0.1);
    flex-shrink: 0;
  }

  .color-hex {
    font-size: 12px;
    color: var(--text);
    letter-spacing: 0.05em;
    min-width: 68px;
  }

  input[type="color"] {
    position: absolute;
    inset: 0;
    opacity: 0;
    cursor: pointer;
    width: 100%;
    height: 100%;
  }

  .gen-btn {
    background: var(--text);
    color: var(--bg);
    border: none;
    border-radius: 8px;
    padding: 10px 20px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s;
    letter-spacing: 0.04em;
  }

  .gen-btn:hover { opacity: 0.85; transform: scale(1.02); }
  .gen-btn:active { transform: scale(0.97); }

  /* Palette display */
  .palette-wrap {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .swatches {
    display: flex;
    flex: 1;
    min-height: 300px;
  }

  .swatch {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    padding: 20px 16px;
    cursor: pointer;
    position: relative;
    transition: flex 0.3s cubic-bezier(0.4,0,0.2,1);
    overflow: hidden;
  }

  .swatch:hover { flex: 1.5; }

  .swatch-info {
    opacity: 0;
    transform: translateY(8px);
    transition: all 0.2s ease;
  }

  .swatch:hover .swatch-info { opacity: 1; transform: translateY(0); }

  .swatch-hex {
    font-size: 13px;
    font-weight: 500;
    letter-spacing: 0.06em;
    margin-bottom: 4px;
  }

  .swatch-name {
    font-size: 10px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    opacity: 0.7;
    margin-bottom: 10px;
  }

  .copy-pill {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: rgba(0,0,0,0.3);
    border-radius: 100px;
    padding: 5px 12px;
    font-size: 11px;
    border: 1px solid rgba(255,255,255,0.15);
    backdrop-filter: blur(8px);
    transition: all 0.12s;
    cursor: pointer;
    width: fit-content;
  }

  .copy-pill:hover { background: rgba(0,0,0,0.5); }
  .copy-pill.copied { background: rgba(0,0,0,0.6); }

  /* Saved palettes */
  .saved-section {
    border-top: 1px solid var(--border);
    padding: 20px 32px;
    background: var(--surface);
  }

  .saved-head {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
  }

  .saved-label {
    font-size: 11px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--sub);
  }

  .save-btn {
    background: none;
    border: 1px solid var(--border);
    color: var(--sub);
    border-radius: 6px;
    padding: 6px 14px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    cursor: pointer;
    transition: all 0.12s;
  }

  .save-btn:hover { color: var(--text); border-color: var(--sub); }

  .saved-list {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
  }

  .saved-palette {
    display: flex;
    border-radius: 8px;
    overflow: hidden;
    cursor: pointer;
    border: 1px solid var(--border);
    transition: all 0.15s;
    height: 40px;
  }

  .saved-palette:hover { transform: scale(1.05); box-shadow: var(--shadow); }

  .saved-swatch {
    width: 32px;
    height: 100%;
  }

  .del-saved {
    background: rgba(0,0,0,0.5);
    border: none;
    color: #fff;
    width: 24px;
    cursor: pointer;
    font-size: 12px;
    opacity: 0;
    transition: opacity 0.12s;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .saved-palette:hover .del-saved { opacity: 1; }

  .no-saved {
    font-size: 12px;
    color: var(--sub);
    font-style: italic;
  }

  /* Toast */
  .toast {
    position: fixed;
    bottom: 24px;
    left: 50%;
    transform: translateX(-50%) translateY(80px);
    background: var(--text);
    color: var(--bg);
    padding: 10px 20px;
    border-radius: 100px;
    font-size: 12px;
    font-weight: 500;
    transition: transform 0.3s ease;
    pointer-events: none;
    z-index: 100;
    white-space: nowrap;
  }

  .toast.show { transform: translateX(-50%) translateY(0); }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(12px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .swatches { animation: fadeUp 0.4s ease both; }
</style>
</head>
<body>

<header>
  <div class="header-left">
    <a href="index.html" class="logo">mini<span>.</span></a>
    <h1>Palette Generator</h1>
  </div>
  <div class="controls">
    <div class="ctrl-group" id="harmony-tabs">
      <button class="ctrl-btn active" data-mode="analogous" onclick="setHarmony('analogous')">Analogous</button>
      <button class="ctrl-btn" data-mode="complementary" onclick="setHarmony('complementary')">Complement</button>
      <button class="ctrl-btn" data-mode="triadic" onclick="setHarmony('triadic')">Triadic</button>
      <button class="ctrl-btn" data-mode="monochromatic" onclick="setHarmony('monochromatic')">Mono</button>
      <button class="ctrl-btn" data-mode="split" onclick="setHarmony('split')">Split</button>
    </div>
    <div class="color-pick-wrap">
      <div class="color-preview" id="color-preview" style="background:#6366f1"></div>
      <div class="color-hex" id="color-hex">#6366F1</div>
      <input type="color" id="color-pick" value="#6366f1" oninput="onColorChange()" onchange="generate()">
    </div>
    <button class="gen-btn" onclick="randomize()">⟳ Random</button>
  </div>
</header>

<div class="palette-wrap">
  <div class="swatches" id="swatches"></div>

  <div class="saved-section">
    <div class="saved-head">
      <div class="saved-label">Saved palettes</div>
      <button class="save-btn" onclick="savePalette()">+ Save current</button>
    </div>
    <div class="saved-list" id="saved-list"></div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
  let harmony = 'analogous';
  let saved = JSON.parse(localStorage.getItem('palettes_v1') || '[]');
  let currentColors = [];

  // Color utilities
  function hexToHsl(hex) {
    let r = parseInt(hex.slice(1,3),16)/255;
    let g = parseInt(hex.slice(3,5),16)/255;
    let b = parseInt(hex.slice(5,7),16)/255;
    const max = Math.max(r,g,b), min = Math.min(r,g,b);
    let h, s, l = (max+min)/2;
    if (max === min) { h = s = 0; }
    else {
      const d = max - min;
      s = l > 0.5 ? d/(2-max-min) : d/(max+min);
      switch(max) {
        case r: h = ((g-b)/d + (g<b?6:0))/6; break;
        case g: h = ((b-r)/d + 2)/6; break;
        case b: h = ((r-g)/d + 4)/6; break;
      }
    }
    return [h*360, s*100, l*100];
  }

  function hslToHex(h, s, l) {
    s /= 100; l /= 100;
    const a = s * Math.min(l, 1-l);
    const f = n => {
      const k = (n + h/30) % 12;
      const c = l - a * Math.max(-1, Math.min(k-3, 9-k, 1));
      return Math.round(255*c).toString(16).padStart(2,'0');
    };
    return '#' + f(0) + f(8) + f(4);
  }

  function isLight(hex) {
    const r = parseInt(hex.slice(1,3),16);
    const g = parseInt(hex.slice(3,5),16);
    const b = parseInt(hex.slice(5,7),16);
    return (0.299*r + 0.587*g + 0.114*b) / 255 > 0.5;
  }

  function colorName(hex) {
    const [h, s, l] = hexToHsl(hex);
    if (s < 10) return l < 30 ? 'Dark' : l > 70 ? 'Light' : 'Gray';
    const hues = ['Red','Orange','Yellow','Yellow-Green','Green','Teal','Cyan','Blue','Indigo','Violet','Purple','Pink'];
    const name = hues[Math.round(h/30) % 12];
    const lum = l < 35 ? 'Dark ' : l > 65 ? 'Light ' : '';
    const sat = s < 30 ? 'Muted ' : s > 80 ? 'Vivid ' : '';
    return sat + lum + name;
  }

  function generateColors(hex, mode) {
    const [h, s, l] = hexToHsl(hex);
    switch(mode) {
      case 'analogous':
        return [-40,-20,0,20,40].map(d => hslToHex((h+d+360)%360, s, l));
      case 'complementary':
        return [0,20,-20].map(d => hslToHex(h,s,l+d))
          .concat([0,20].map(d => hslToHex((h+180)%360,s,l+d)));
      case 'triadic':
        return [
          hslToHex(h,s,l),
          hslToHex(h,s,l-15),
          hslToHex((h+120)%360,s,l),
          hslToHex((h+120)%360,s,l-15),
          hslToHex((h+240)%360,s,l),
        ];
      case 'monochromatic':
        return [20,35,50,65,80].map(lv => hslToHex(h, s, lv));
      case 'split':
        return [
          hslToHex(h,s,l),
          hslToHex(h,s,l-15),
          hslToHex((h+150)%360,s,l),
          hslToHex((h+150)%360,s,l-10),
          hslToHex((h+210)%360,s,l),
        ];
      default: return [hex];
    }
  }

  function setHarmony(m) {
    harmony = m;
    document.querySelectorAll('.ctrl-btn[data-mode]').forEach(b => b.classList.toggle('active', b.dataset.mode === m));
    generate();
  }

  function onColorChange() {
    const hex = document.getElementById('color-pick').value;
    document.getElementById('color-preview').style.background = hex;
    document.getElementById('color-hex').textContent = hex.toUpperCase();
    generate();
  }

  function generate() {
    const hex = document.getElementById('color-pick').value;
    currentColors = generateColors(hex, harmony);
    renderSwatches();
  }

  function randomize() {
    const h = Math.random() * 360;
    const s = 50 + Math.random() * 40;
    const l = 40 + Math.random() * 20;
    const hex = hslToHex(h, s, l);
    document.getElementById('color-pick').value = hex;
    document.getElementById('color-preview').style.background = hex;
    document.getElementById('color-hex').textContent = hex.toUpperCase();
    generate();
  }

  function renderSwatches() {
    const wrap = document.getElementById('swatches');
    wrap.innerHTML = '';
    currentColors.forEach((color, i) => {
      const light = isLight(color);
      const textColor = light ? 'rgba(0,0,0,0.85)' : 'rgba(255,255,255,0.9)';
      const el = document.createElement('div');
      el.className = 'swatch';
      el.style.background = color;
      el.style.color = textColor;
      el.innerHTML = `
        <div class="swatch-info">
          <div class="swatch-hex">${color.toUpperCase()}</div>
          <div class="swatch-name">${colorName(color)}</div>
          <div class="copy-pill" onclick="copyColor('${color}', this)" style="color:${textColor}; border-color:${light?'rgba(0,0,0,0.15)':'rgba(255,255,255,0.2)'}">
            <span>copy</span>
          </div>
        </div>
      `;
      wrap.appendChild(el);
    });
  }

  function copyColor(hex, el) {
    navigator.clipboard.writeText(hex);
    const span = el.querySelector('span');
    span.textContent = 'copied!';
    el.classList.add('copied');
    setTimeout(() => { span.textContent = 'copy'; el.classList.remove('copied'); }, 1500);
    showToast(`${hex.toUpperCase()} copied`);
  }

  function savePalette() {
    if (currentColors.length === 0) return;
    saved.unshift({ id: Date.now(), colors: [...currentColors] });
    if (saved.length > 20) saved.pop();
    localStorage.setItem('palettes_v1', JSON.stringify(saved));
    renderSaved();
    showToast('Palette saved!');
  }

  function loadPalette(colors) {
    currentColors = colors;
    const hex = colors[2] || colors[0];
    document.getElementById('color-pick').value = hex;
    document.getElementById('color-preview').style.background = hex;
    document.getElementById('color-hex').textContent = hex.toUpperCase();
    renderSwatches();
  }

  function deleteSaved(id) {
    saved = saved.filter(p => p.id !== id);
    localStorage.setItem('palettes_v1', JSON.stringify(saved));
    renderSaved();
  }

  function renderSaved() {
    const list = document.getElementById('saved-list');
    if (saved.length === 0) {
      list.innerHTML = '<div class="no-saved">No saved palettes yet</div>';
      return;
    }
    list.innerHTML = '';
    saved.forEach(p => {
      const el = document.createElement('div');
      el.className = 'saved-palette';
      el.onclick = () => loadPalette(p.colors);
      p.colors.forEach(c => {
        const sw = document.createElement('div');
        sw.className = 'saved-swatch';
        sw.style.background = c;
        el.appendChild(sw);
      });
      const del = document.createElement('button');
      del.className = 'del-saved';
      del.textContent = '✕';
      del.onclick = e => { e.stopPropagation(); deleteSaved(p.id); };
      el.appendChild(del);
      list.appendChild(el);
    });
  }

  function showToast(msg) {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 2000);
  }

  // Space to randomize
  document.addEventListener('keydown', e => {
    if (e.code === 'Space' && e.target === document.body) { e.preventDefault(); randomize(); }
  });

  generate();
  renderSaved();
</script>
</body>
</html>